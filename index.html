<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Spesial Buat Kamu </title>
  
  <script src="https://cdn.tailwindcss.com"></script>
  
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&family=Patrick+Hand&family=Sacramento&display=swap');
    body { font-family: 'Fredoka', sans-serif; background-color: #fce7f3; -webkit-tap-highlight-color: transparent; }
    .font-hand { font-family: 'Patrick Hand', cursive; }
    .font-script { font-family: 'Sacramento', cursive; }
    
    /* Animasi Tambahan */
    @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
    .animate-float { animation: float 3s ease-in-out infinite; }
    
    /* Efek Kertas */
    .paper-texture { background-color: #fffdf0; background-image: linear-gradient(#f0f0f0 1px, transparent 1px); background-size: 100% 1.5em; }
    
    /* Efek Balik Kartu */
    .perspective-1000 { perspective: 1000px; }
    .transform-style-3d { transform-style: preserve-3d; }
    .backface-hidden { backface-visibility: hidden; }
    .rotate-y-180 { transform: rotateY(180deg); }
    
    /* Scrollbar Cantik */
    .custom-scrollbar::-webkit-scrollbar { width: 5px; }
    .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
    .custom-scrollbar::-webkit-scrollbar-thumb { background: #f472b6; border-radius: 10px; }
    
    /* Loading Error Display */
    #error-display { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: white; z-index: 9999; padding: 20px; color: red; overflow: auto; }
  </style>

  <script>
    window.onerror = function(message, source, lineno, colno, error) {
      const display = document.getElementById('error-display');
      display.style.display = 'block';
      display.innerHTML += `<h3>Terjadi Kesalahan:</h3><p>${message}</p><p>Line: ${lineno}</p><hr>`;
    };
  </script>

  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
  
  <div id="root"></div>
  
  <div id="error-display">
    <h2 style="color: black;">Waduh Error Bro! </h2>
    <p style="color: gray;">Coba cek koneksi internet, terus refresh lagi ya.</p>
    <hr>
  </div>

  <script type="text/babel">
    // Cek apakah React berhasil dimuat
    if (typeof React === 'undefined') {
      throw new Error("Koneksi internet tidak stabil. React gagal dimuat.");
    }

    const { useState, useRef, useEffect } = React;

    /* =========================================================================
       COMPONENT ICON (Disederhanakan biar ringan di HP)
       ========================================================================= */
    const Heart = ({ size = 24, className = "" }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
        <path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z" />
      </svg>
    );
    const Play = ({ size = 24, className = "", fill = "none" }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill={fill} stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
        <polygon points="5 3 19 12 5 21 5 3" />
      </svg>
    );
    const MusicIcon = ({ size = 24, className = "" }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
        <path d="M9 18V5l12-2v13" /><circle cx="6" cy="18" r="3" /><circle cx="18" cy="16" r="3" />
      </svg>
    );
    const Gift = ({ size = 24, className = "" }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
        <rect x="3" y="8" width="18" height="4" rx="1" /><path d="M12 8v13" /><path d="M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7" /><path d="M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.9 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5" />
      </svg>
    );
    const Mail = ({ size = 24, className = "" }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
        <rect width="20" height="16" x="2" y="4" rx="2" /><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7" />
      </svg>
    );
    const ChevronLeft = ({ size = 24, className = "" }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
        <path d="m15 18-6-6 6-6" />
      </svg>
    );
    const ChevronRight = ({ size = 24, className = "" }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
        <path d="m9 18 6-6-6-6" />
      </svg>
    );
    const XIcon = ({ size = 24, className = "" }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
        <path d="M18 6 6 18" /><path d="m6 6 12 12" />
      </svg>
    );
    const Sparkles = ({ size = 24, className = "" }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
        <path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z" /><path d="M5 3v4" /><path d="M9 5H5" />
      </svg>
    );

    /* =========================================================================
       DATA VALENTINE (DATA KAMU - JANGAN DIUBAH)
       ========================================================================= */
    const DATA_VALENTINE = {
      musik: "https://files.catbox.moe/4021e2.mp3",
      panggilan: "Sayang",
      slideFoto: [
        { foto: "https://i.postimg.cc/bNQX20Kp/IMG-20250526-WA0015.jpg", judul: "Awal Ketemu", isi: "Masih inget gak foto ini? Waktu kita masih malu malu haha." },
        { foto: "https://i.postimg.cc/Jh8bKX4W/IMG-20251025-WA0047.jpg", judul: "main berdua", isi: "Momen seharian ketawa bareng kamu." },
        { foto: "https://i.postimg.cc/gJ9qRR92/IMG-20250515-110311.jpg", judul: "First time di bawain bekal", isi: " PERTAMA KALI DI HIDUP AKUU DI BAWAIN DARI SESEORANG SELAIN MAMA AKUU HIHI, MAACII YAA SAYANGGKUU." },
        { foto: "https://i.postimg.cc/kMLyxQqL/IMG-20260208-WA0162.jpg", judul: "Kita Sekarang", isi: "ga nyangka kita udah di titik sekarang yaa sayangg, padahal dulu kitaa masi kelas 11 eh udah mau lulus aja hihi" }
      ],
      kartuUcapan: [
        { foto: "https://i.postimg.cc/vBJ66v5y/IMG-20260212-WA0010.jpg", judul: "CANTIK BGT GILAK", isi: "CEWE GUAA CANTIK BGT WOYYY ." },
        { foto: "https://i.postimg.cc/XNRCNFM8/IMG-20250529-WA0115.jpg", judul: "Mata Indah", isi: "Hal yang paling indah ketika aku memandangi kamu." },
        { foto: "https://i.postimg.cc/XNRCNFM8/IMG-20250529-WA0115.jpg", judul: "Senyum Kamu", isi: "Salah satu hal terindah yang pernah ada." },
        { foto: "https://i.postimg.cc/mrJnpVq3/IMG-20250823-WA0026.jpg", judul: "MUKAA GEMECC KAMUU", isi: "." }
      ],
      isiSurat: {
        paragraf1: "Haii sayangku, Selamat hari valentine yaa!! ga kerasaa kitaa udah sejauh ini.",
        paragraf2: "Makasih udah jadi pasangan yang saling melengkapi sayangg. Makasih udah sabar ngandepin sikap akuu yang mungkin sukaa bikin kamu jengkel dan marah hihi.",
        paragraf3: "akuu cuman mau bilang, aku beruntung banget punyaa kamu di hidup aku saat ini. makasih yaa sayangg udah mau bertahan dengan orang kayaa akuu, makasihh banget udah mau nerima aku di kehidupan kamu.",
        paragraf4: "sayanggkuu, semogaa kamu selalu di beri kesehatan yaa, always be happy everdayy, dan tolong... jangan bosen samaa akuu yaa? aku selalu berusaha mencintai kamu dan memahami kamu setiap harinya. I Love You So Much BEBIYYY! .",
        pengirim: "Kekasihmu Satria"
      }
    };

    const STICKERS = {
      intro: "https://media.tenor.com/gUiu1zyxfzYAAAAi/bear-kiss-bear-kisses.gif",
      ask: "https://media.tenor.com/OsM_jW_tqD8AAAAi/cute-bear.gif",
      success: "https://media.tenor.com/n147k9e3cE8AAAAi/sticker-finito.gif",
      letter: "https://media.tenor.com/P4WfFqF8pXoAAAAi/milk-and-mocha-love.gif"
    };

    /* =========================================================================
       APLIKASI UTAMA
       ========================================================================= */
    const App = () => {
      const [stage, setStage] = useState('intro');
      const [isPlaying, setIsPlaying] = useState(false);
      const [currentSlide, setCurrentSlide] = useState(0);
      const [flippedCards, setFlippedCards] = useState([]);
      const [showLetter, setShowLetter] = useState(false);
      const [noBtnPos, setNoBtnPos] = useState({ top: '65%', left: '60%' });
      const [noBtnText, setNoBtnText] = useState("No ");

      const audioRef = useRef(null);

      // Fungsi Play Musik Aman
      const safePlay = () => {
        if (audioRef.current) {
          audioRef.current.play()
            .then(() => setIsPlaying(true))
            .catch(e => {
              console.log("Autoplay dicegah browser, perlu interaksi user");
              setIsPlaying(false);
            });
        }
      };

      const safePause = () => {
        if (audioRef.current) {
          audioRef.current.pause();
          setIsPlaying(false);
        }
      };

      const handleStart = () => {
        safePlay();
        setStage('ask');
      };

      const moveButton = () => {
        const randomTop = Math.random() * 50 + 30 + '%';
        const randomLeft = Math.random() * 60 + 20 + '%';
        setNoBtnPos({ top: randomTop, left: randomLeft });
        const texts = ["Yakin?", "Masa sih?", "Jangan dong", "Jahat ih ", "Pencet Yes!", "Gabisa wlee"];
        setNoBtnText(texts[Math.floor(Math.random() * texts.length)]);
      };

      const toggleCard = (index) => {
        if (flippedCards.includes(index)) {
          setFlippedCards(flippedCards.filter(i => i !== index));
        } else {
          setFlippedCards([...flippedCards, index]);
        }
      };

      const nextSlide = () => setCurrentSlide((prev) => (prev + 1) % DATA_VALENTINE.slideFoto.length);
      const prevSlide = () => setCurrentSlide((prev) => (prev - 1 + DATA_VALENTINE.slideFoto.length) % DATA_VALENTINE.slideFoto.length);

      return (
        <div className="min-h-screen relative overflow-x-hidden">
          <audio ref={audioRef} src={DATA_VALENTINE.musik} loop />

          {/* === HALAMAN 1: INTRO === */}
          {stage === 'intro' && (
            <div className="fixed inset-0 z-50 bg-pink-100 flex flex-col items-center justify-center text-center p-6">
              <div className="bg-white p-8 rounded-3xl shadow-xl border-4 border-pink-200 max-w-sm w-full relative">
                <div className="absolute top-0 left-0 w-full h-2 bg-pink-400"></div>
                <img src={STICKERS.intro} alt="Bear" className="w-40 h-40 mx-auto mb-4 animate-float" />
                <h1 className="text-3xl font-bold text-pink-500 mb-2">Hai {DATA_VALENTINE.panggilan}! </h1>
                <p className="text-gray-500 mb-6 font-hand text-xl">Ada pesan kecil buat kamu...</p>
                <button onClick={handleStart} className="bg-pink-500 text-white px-8 py-3 rounded-full font-bold shadow-lg hover:scale-105 transition-transform flex items-center justify-center gap-2 mx-auto w-full">
                  <Play size={20} fill="currentColor" /> Buka Sekarang
                </button>
              </div>
            </div>
          )}

          {/* === HALAMAN 2: PERTANYAAN === */}
          {stage === 'ask' && (
            <div className="fixed inset-0 z-50 bg-pink-50 flex flex-col items-center justify-center p-4">
              <div className="bg-white p-8 rounded-3xl shadow-2xl text-center max-w-sm w-full border-4 border-pink-200 relative">
                <img src={STICKERS.ask} alt="Please" className="w-32 h-32 mx-auto mb-2" />
                <h2 className="text-2xl font-bold text-gray-800 mb-2">Will You Be My Valentine?</h2>
                <p className="text-gray-400 text-sm mb-8">Jawab jujur yaa...</p>
                <div className="h-20 flex justify-center items-start">
                  <button onClick={() => setStage('content')} className="bg-pink-500 text-white px-10 py-3 rounded-full font-bold shadow-lg hover:scale-110 transition-transform z-10">
                    MAU DONG! 
                  </button>
                </div>
                <button 
                  onMouseEnter={moveButton} onTouchStart={moveButton} onClick={moveButton}
                  style={{ position: 'fixed', top: noBtnPos.top, left: noBtnPos.left, transition: 'all 0.3s ease' }}
                  className="bg-gray-200 text-gray-500 px-4 py-2 rounded-full font-bold shadow text-xs whitespace-nowrap z-50"
                >
                  {noBtnText}
                </button>
              </div>
            </div>
          )}

          {/* === HALAMAN 3: KONTEN UTAMA === */}
          {stage === 'content' && (
            <div className="animate-in fade-in duration-1000 pb-20 pt-6">
              {/* Tombol Musik */}
              <div onClick={() => isPlaying ? safePause() : safePlay()} className="fixed top-4 right-4 z-[100] bg-white/90 backdrop-blur p-3 rounded-full shadow-lg border border-pink-200 cursor-pointer">
                <MusicIcon className={isPlaying ? "animate-spin text-pink-500" : "text-gray-400"} size={20} />
              </div>

              <header className="text-center px-4 mb-8 mt-4">
                <img src={STICKERS.success} alt="Happy" className="w-24 h-24 mx-auto mb-2 animate-bounce" />
                <h1 className="text-3xl font-bold text-pink-600 font-hand">Yey! Makasih {DATA_VALENTINE.panggilan}</h1>
              </header>

              {/* SLIDE FOTO */}
              <section className="max-w-md mx-auto px-4 mb-12">
                <div className="bg-white p-4 pb-12 rounded-xl shadow-xl transform rotate-1 border border-gray-100 relative">
                  <div className="absolute -top-3 -left-3 text-pink-400 transform -rotate-12"><Heart className="fill-pink-400" size={40} /></div>
                  <div className="aspect-[4/5] bg-gray-100 overflow-hidden rounded-lg relative">
                    <img 
                      src={DATA_VALENTINE.slideFoto[currentSlide].foto} 
                      className="w-full h-full object-cover" 
                      onError={(e) => e.target.src='https://via.placeholder.com/400x500?text=Foto+Error'} 
                    />
                    <button onClick={prevSlide} className="absolute left-2 top-1/2 -translate-y-1/2 bg-white/70 p-2 rounded-full text-gray-700"><ChevronLeft size={24} /></button>
                    <button onClick={nextSlide} className="absolute right-2 top-1/2 -translate-y-1/2 bg-white/70 p-2 rounded-full text-gray-700"><ChevronRight size={24} /></button>
                  </div>
                  <div className="mt-4 text-center">
                    <h3 className="font-hand text-2xl font-bold text-pink-500">{DATA_VALENTINE.slideFoto[currentSlide].judul}</h3>
                    <p className="text-gray-500 text-sm mt-1">{DATA_VALENTINE.slideFoto[currentSlide].isi}</p>
                  </div>
                  <div className="flex justify-center gap-1 mt-4 absolute bottom-4 left-0 right-0">
                    {DATA_VALENTINE.slideFoto.map((_, idx) => (
                      <div key={idx} className={`w-2 h-2 rounded-full ${idx === currentSlide ? 'bg-pink-500' : 'bg-gray-300'}`} />
                    ))}
                  </div>
                </div>
              </section>

              {/* KARTU DIBALIK */}
              <section className="max-w-4xl mx-auto px-4 mb-16">
                <h2 className="text-2xl font-script font-bold text-center text-pink-600 mb-6 flex items-center justify-center gap-2">
                  <Sparkles className="text-yellow-400 fill-yellow-400" size={20} /> Hal Terindah <Sparkles className="text-yellow-400 fill-yellow-400" size={20} />
                </h2>
                <div className="grid grid-cols-2 gap-3">
                  {DATA_VALENTINE.kartuUcapan.map((card, index) => (
                    <div key={index} onClick={() => toggleCard(index)} className="aspect-square cursor-pointer perspective-1000 relative group">
                      <div className={`w-full h-full duration-500 transform-style-3d transition-transform relative ${flippedCards.includes(index) ? 'rotate-y-180' : ''}`}>
                        
                        {/* DEPAN */}
                        <div className="absolute inset-0 backface-hidden bg-white rounded-2xl shadow-md border-2 border-pink-100 flex flex-col items-center justify-center p-2 text-center">
                          <Gift className="text-pink-400 mb-2 animate-bounce" size={32} />
                          <span className="text-xs font-bold text-pink-400 uppercase">Klik Aku</span>
                        </div>
                        
                        {/* BELAKANG */}
                        <div className="absolute inset-0 backface-hidden rotate-y-180 rounded-2xl shadow-md overflow-hidden bg-gray-900 border-2 border-white">
                          <img src={card.foto} className="absolute inset-0 w-full h-full object-cover opacity-40" />
                          <div className="absolute inset-0 flex flex-col items-center justify-center p-3 text-center z-10">
                            <h3 className="text-white font-bold text-sm mb-1 drop-shadow-md">{card.judul}</h3>
                            <p className="text-gray-100 text-[10px] leading-tight drop-shadow-sm">"{card.isi}"</p>
                          </div>
                        </div>

                      </div>
                    </div>
                  ))}
                </div>
              </section>

              {/* TOMBOL SURAT */}
              <section className="max-w-md mx-auto px-4 text-center pb-10">
                <p className="text-gray-500 text-sm mb-4 font-hand">Ada satu hal lagi...</p>
                <button onClick={() => setShowLetter(true)} className="bg-white border-2 border-pink-500 text-pink-500 px-8 py-3 rounded-full font-bold shadow-lg hover:bg-pink-50 transition flex items-center justify-center gap-2 mx-auto w-full animate-bounce">
                  <Mail size={20} /> Buka Surat
                </button>
              </section>
            </div>
          )}

          {/* === POPUP SURAT === */}
          {showLetter && (
            <div className="fixed inset-0 z-[60] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4">
              <div className="bg-[#fffdf0] w-full max-w-md p-8 rounded-lg shadow-2xl relative animate-in zoom-in duration-300 paper-texture transform rotate-1">
                <button onClick={() => setShowLetter(false)} className="absolute top-2 right-2 text-gray-400"><XIcon size={24} /></button>
                <div className="text-center">
                  <img src={STICKERS.letter} className="w-24 h-24 mx-auto mb-4" />
                  <h2 className="font-script text-3xl font-bold text-pink-600 mb-4">Happy Valentine's Day</h2>
                  <div className="font-hand text-gray-700 text-lg leading-loose space-y-4 text-left max-h-[50vh] overflow-y-auto pr-2 custom-scrollbar">
                    <p>{DATA_VALENTINE.isiSurat.paragraf1}</p>
                    <p>{DATA_VALENTINE.isiSurat.paragraf2}</p>
                    <p>{DATA_VALENTINE.isiSurat.paragraf3}</p>
                    <p>{DATA_VALENTINE.isiSurat.paragraf4}</p>
                  </div>
                  <div className="mt-8 text-right border-t border-pink-200 pt-4">
                    <p className="font-hand text-gray-500 text-sm">With love,</p>
                    <p className="font-script text-2xl text-pink-500 font-bold">{DATA_VALENTINE.isiSurat.pengirim} ❤️</p>
                  </div>
                </div>
              </div>
            </div>
          )}
        </div>
      );
    };

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>